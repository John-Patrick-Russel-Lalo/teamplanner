<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles/dashboard.css">
    <title>Dashboard</title>
</head>
<body>

    <!-- Navigation -->
    <div class="navtop">
        <h1 class="title">Teamplanner</h1>
    </div>

    <!-- Main Content -->
    <div class="main">
        
        <!-- Project Section -->
        <div class="div2">
            <button id="addProjectBtn">Add Project</button>
            <div class="innerdiv2">
                <ol>
                    <li>First Item</li>
                    <li>Second Item</li>
                    <li>Third Item</li>
                    <li>4</li>
                    <li>5</li>
                    <li>6</li>
                    <li>7</li>
                    <li>8</li>
                </ol>         
            </div>  
        </div>
    </div>
    <script>
document.getElementById("addProjectBtn").addEventListener("click", async () => {
  const projectName = prompt("Enter project name:");
  if (!projectName) return;

  const userId = localStorage.getItem("userId");
  if (!userId) {
    alert("User not logged in.");
    return;
  }

  try {
    const res = await fetch("/api/create-project", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        name: projectName,
        userId: userId,
        board: {} // empty board structure for now
      })
    });

    const data = await res.json();
    if (!res.ok) throw new Error(data.error);

    alert(`Project "${data.project.name}" created!`);
    // TODO: Add it to the <ol> list dynamically if you want

  } catch (err) {
    console.error(err);
    alert("Failed to create project.");
  }
});
    </script>
    
</body>
</html>
